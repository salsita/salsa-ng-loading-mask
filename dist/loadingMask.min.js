angular.module("salsaNgLoadingMask",[]).factory("SalsaLoadingMaskScope",function(a){var s=a.$new();return s.CUSTOM_GROUP_PREFIX="customGroup",s.DEFAULT_GROUP_NAME="default",s}).factory("SalsaLoadingMaskHttpInterceptor",function(a,s,n){var t=function(a){if(angular.isString(a.loadingMask)){var n=/^[a-z0-9]+$/i;if(!n.test(a.loadingMask))throw new Error("Loading mask group name must contain only alphanumeric characters");return s.CUSTOM_GROUP_PREFIX+a.loadingMask}return s.DEFAULT_GROUP_NAME},e=function(a,s){return a[s]||(a[s]={hidingMaskShowed:!1,started:0,finished:0}),a[s]},r=function(n,r){if(n.config.loadingMask){var o=t(n.config),i=e(a,o);i.finished++,i.started===i.finished&&(s.$broadcast(r?"salsa:hideLoadingMask:"+o:"salsa:errorHideLoadingMask:"+o),i.hidingMaskShowed=!1,i.started=0,i.finished=0)}return n};return{request:function(n){if(n.loadingMask){var r=t(n),o=e(a,r);o.hidingMaskShowed||s.$broadcast("salsa:showLoadingMask:"+r),o.started++}return n},responseError:function(a){return n.reject(r(a,!1))},response:function(a){return r(a,!0)}}}).directive("salsaLoadingMask",function(a,s,n){return{restrict:"A",template:'<div class="salsa-mask">'+s.template+"</div><ng-transclude></ng-transclude>",transclude:!0,scope:{group:"@salsaLoadingMaskGroup",fullScreenMask:"@salsaLoadingMaskFullscreen",templateData:"&salsaLoadingMaskTemplateData"},link:function(a,s){var t=a.group?n.CUSTOM_GROUP_PREFIX+a.group:n.DEFAULT_GROUP_NAME,e=s.find(".salsa-mask");a.context=a.templateData(),n.$on("salsa:showLoadingMask:"+t,function(){void 0!==a.fullScreenMask?(e.css("position","fixed"),e.css("left",0),e.css("top",0),e.css("right",0),e.css("bottom",0),e.css("z-index",999)):(e.css("position","absolute"),e.css("width",s.width()+"px"),e.css("height",s.height()+"px"),e.css("z-index",998)),e.removeClass("error"),e.addClass("shown")}),n.$on("salsa:hideLoadingMask:"+t,function(){e.removeClass("shown")}),n.$on("salsa:errorHideLoadingMask:"+t,function(){e.addClass("error"),e.removeClass("shown")})}}}).provider("SalsaLoadingMaskConfig",function(){var a={template:""};return{set:function(s){angular.extend(a,s)},$get:function(){return a}}}).config(function(a){a.interceptors.push("SalsaLoadingMaskHttpInterceptor")});